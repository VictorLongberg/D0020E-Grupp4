<!doctype html>
<html>
<<<<<<< Updated upstream
	<head>
		 <link rel="stylesheet" href="css/bootstrap.min.css">
	<script>
	var name = prompt("Enter nickname: ");

=======
<head>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/main.css">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script>
	var name = prompt("Enter nickname: ");

	function setname () {
		name = prompt("Enter nickname: ");
		updateChatAs();
	}

	while (name == "null" || !name || name.length > 30) {
		name = prompt("Please enter valid nickname (MAX 30 CHARACTERS) : ");
	}

>>>>>>> Stashed changes
	function getName() {
		return name;
	}
	</script>

<<<<<<< Updated upstream
	<style>
		* {
			box-sizing: border-box;
		}

		body { font: 13px Helvetica, Arial; border: black 3px;}
		#messages { list-style-type: none; margin: 0; padding: 0; }
		#messages li { padding: 8px 10px; }
		#messages li:nth-child(odd) { background: #eee;  border-bottom: black solid 1px;}
		#messages li:nth-child(even) { background: lightblue;  border-bottom: black solid 1px;}
		/*
		.TextWindowBottom {
			background: #000;
			padding: 3px;
			position: fixed;
			bottom: 10px;
			width: 100%;
			margin-left: 0%;
			right: 0px;
		}

		.TextWindowBottom input {
			border: 0;
			padding: 11px;
			width: 79%;
			margin-right: 0%;
			margin-left: 2px;
		}

		.TextWindowBottom button {
			width: 5%;
		 	background: lightgray;
			border: black;
			padding: 12px;
			float:right;
		}

		.thumbs-up-facebook {
			width: 0%;
			padding: 3px;
			position: fixed;
			bottom: 55px;
			width: 100%;
		}

		.thumbs-up-facebook input[type="checkbox"] {
    		opacity: 0;
		}

		img {
			border: white solid 1px;
			height: 50px;
			width: 50px;
			margin-top: 90%;
		}


		.checkboxes {
			width: 4%;
			background:lightgray;
			border: none;
			padding: 12px;
			float: right;
			position: relative;
			display: block;
			border-right: black;
			margin-left: 1mm;
			box-sizing: content-box;
			padding-right: 0mm;
		}

		.checkboxes input {
			position: absolute;
			width: 10px;
		}

		.CurrentUser {
			width: 6%;
			background: lightgray;
			border: none;
			padding: 11px;
			float: left;
			position: relative;
			display: block;
			border-right: black;
			margin-left: 0mm;
			box-sizing: content-box;
			padding-right: 0mm;
		}

		.OverlappingFix {  Ghetto lösning som ej är bra men nu overlappar inte chat med meddelande window
			border: white 15px solid;
			position: absolute;
			max-width: 90%;
			padding-bottom: 30px;
		}*/
		.messages{
			height: 100%;
			border:1px solid black;
			position:relative;
		}


	</style>

		<title>Simple chat</title>

	</head>

	<body>
			<div class="row">
				<div class="col-6">
					<h1>Video placeholder</h1>
					<div class="embed-responsive embed-responsive-16by9">
					  <iframe width="560" height="315" src="https://www.youtube.com/embed/08fjqkLnBwM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
					</div>
=======
	<title>Simple chat</title>
	<link rel="icon" type="image/png" href="/images/favicon.png" />

</head>

<body>

	<!-- Memes? -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script>
	$(document).ready(function() {
		// Making 2 variable month and day
		var monthNames = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];
		var dayNames= ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]

		// make single object
		var newDate = new Date();
		// make current time
		newDate.setDate(newDate.getDate());
		// setting date and time
		$('#Date').html(dayNames[newDate.getDay()] + " " + newDate.getDate() + ' ' + monthNames[newDate.getMonth()] + ' ' + newDate.getFullYear());

		setInterval( function() {
			// Create a newDate() object and extract the seconds of the current time on the visitor's
			var seconds = new Date().getSeconds();
			// Add a leading zero to seconds value
			$("#sec").html(( seconds < 10 ? "0" : "" ) + seconds);
		},1000);

		setInterval( function() {
			// Create a newDate() object and extract the minutes of the current time on the visitor's
			var minutes = new Date().getMinutes();
			// Add a leading zero to the minutes value
			$("#min").html(( minutes < 10 ? "0" : "" ) + minutes);
		},1000);

		setInterval( function() {
			// Create a newDate() object and extract the hours of the current time on the visitor's
			var hours = new Date().getHours();
			// Add a leading zero to the hours value
			$("#hours").html(( hours < 10 ? "0" : "" ) + hours);
		}, 1000);
	});
	</script>
<div class="container">
	<div class="clock">
		<div id="Date"></div>
		<ul>
			<li id="hours"></li>
			<li id="point">:</li>
			<li id="min"></li>
			<li id="point">:</li>
			<li id="sec"></li>
		</ul>
	</div>
	<!-- Memes? -->

	<div class="row">

		<div class="col-6">
			<img src="/images/placeholder.jpg" class="img-fluid">
		</div>
		<div class="col-6">
			<div class="messages overflow-auto">
				<ul id="messages"></ul>
			</div>

			<!--<input type="checkbox" id="myCheckbox1" />
			<label for="myCheckbox1"><img src="https://cdn-0.emojis.wiki/emoji-pics/facebook/thumbs-up-facebook.png" /></label>-->
			<form action="">  <!--Tillåter skapandet av meddelanden att vissas på chatten?!?-->
				<!--<div class="row">-->
				<!--<div class="d-flex">-->

				<!--<div class="d-flex btn-group" role="group">-->
				<div class="CurrentUser float-left" id="currentName">
					Chatting as:
					<label>
						<input type="user" id="currentUser" />
					</label>
>>>>>>> Stashed changes
				</div>
				<div class="d-flex">
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							Reaction
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
							<a class="dropdown-item" href="#">
								<img src="/images/confused.png" class="reactionIcon">
							</a>
							<a class="dropdown-item" href="#">
								<img src="/images/confused.png" class="reactionIcon">
							</a>
							<a class="dropdown-item" href="#">
								<img src="/images/confused.png" class="reactionIcon">
							</a>
						</div>
					</div>

<<<<<<< Updated upstream
								<!--<input type="checkbox" id="myCheckbox1" />
								<label for="myCheckbox1"><img src="https://cdn-0.emojis.wiki/emoji-pics/facebook/thumbs-up-facebook.png" /></label>-->
							<form action="">  <!--Tillåter skapandet av meddelanden att vissas på chatten?!?-->
								<!--<div class="row">-->
									<div class="row justify-content-between">
										<div class="btn-group col-4 order-1" role="group">
											Question
											<label>
												<input type="checkbox" id="questionCheck" onclick="updateChatAs()" />
											</label>
											Anonymous
											<label>
												<input type="checkbox" id="anonCheck" onclick="updateChatAs()" />
											</label>
											</div>
												<div class="CurrentUser col-6" id="currentName">
													Chatting as:
													<label>
														<input type="user" id="currentUser" />
													</label>
												</div>
										</div>
											<div class="input-group mb-3 order-1">
												<input type="text" class="form-control" id="m" aria-label="Recipient's username" aria-describedby="button-addon2" autocomplete="off" />
												<div class="input-group-append">
    											<button class="btn btn-secondary" id="button-addon2">Send</button>
  											</div>
											</div>
									</div>
					</div>
				<!--</div>-->
=======
					<!--Question
					<label>
					<input type="checkbox" id="questionCheck" onclick="updateChatAs()" />
				</label>-->
				<div class="form-check form-switch ms-1">
					<button type="button" class="btn btn-secondary btn-sm">
						<label class="form-check-label" for="questionCheck">
							Question
						</label>
					</button>
					<input class="form-check-input" type="checkbox" id="questionCheck" onclick="updateChatAs()" />
				</div>

				<div class="form-check form-switch ms-1">
					<button type="button" class="btn btn-secondary btn-sm">
						<label class="form-check-label" for="anonCheck">
							Anonymous
						</label>
					</button>
					<input class="form-check-input" type="checkbox" id="anonCheck" onclick="updateChatAs()" />
				</div>
				<button type="button" class="btn btn-secondary btn-sm ms-1 mb-3" onclick="setname()">
					Change name
				</button>
			</div>
			<!--</div>-->

			<div class="input-group mb-3 order-1">
				<input type="text" class="form-control" id="m" aria-label="Recipient's username" aria-describedby="button-addon2" autocomplete="off" />
				<div class="input-group-append">
					<button class="btn btn-secondary" id="button-addon2">Send</button>
				</div>
			</div>
		</div>
	</div>
	<!--</div>-->
	<!--</div>-->
>>>>>>> Stashed changes


	<script>
	var confuseTimer;

	function toggleConfused() {
		// Become confused
		if (document.getElementById('myCheckbox1').checked) {
			$("#confusedPic").fadeTo(300, 0.2);
			$('#messages').append($('<li>').text("You are confused!"));
			confuseTimer = setTimeout(confuseTimerDone, 1000);
		}

		else {
			$("#confusedPic").fadeTo(300, 1);
			clearTimeout(confuseTimer);
		}
	}

	function confuseTimerDone() {
		$("#myCheckbox1").prop("checked", false);
		toggleConfused();
	}

	function updateChatAs() {
		var chatAsText = "";

		if (document.getElementById('questionCheck').checked) {
			chatAsText += 'Asking question as: ';
		}

		else {
			chatAsText += 'Chatting as: ';
		}

		if (document.getElementById('anonCheck').checked) {
			chatAsText += 'Anonymous';
		}

		else {
			chatAsText += getName();
		}

		document.getElementById('currentName').innerHTML = chatAsText;
	}

	updateChatAs();

	</script>
</form>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="\js\bootstrap\bootstrap.bundle.js"></script>
<script>
$(function () {
	var socket = io();
	$('form').submit(function(e) {
		e.preventDefault();

		// If message box is empty don't send message
		if (!$('#m').val()) {
			return;
		}

		socket.emit('name', name);

		//Check question
		if (document.getElementById("questionCheck").checked) {

			if (document.getElementById("anonCheck").checked) {
				socket.emit('question', true, $('#m').val());
			}

			else {
				socket.emit('question', false, $('#m').val());
			}
		}

		else {
			if (document.getElementById("anonCheck").checked) {
				socket.emit('chat message', true, $('#m').val());
			}

			else {
				socket.emit('chat message', false, $('#m').val());
			}
		}

		$('#m').val('');
		return false;
	});

	socket.on('chat message', function(sender, msg, date){
		var dt = new Date(date);
		var time = dt.getHours() + ":" + dt.getMinutes() + ":" + dt.getSeconds();
		//time.css({ "font-size": "120%"});

		$('#messages').append($('<li>').html( '<span class="Sender">' + sender + '</span>'  + ": " + msg  + '<span class="Time">'  + time + '</span>' ));

	});

	socket.on('question', function(sender, questionMsg, questionID, date){
		var question = $('<li>').text(sender + ": " +questionMsg);
		question.css({"background-color":"yellow", "font-size": "120%"});
		question.attr({id: 'question' +questionID});
		var upvoteButton = $('<input/>').attr({id: 'upvote' +questionID, type: 'button', name:'Upvote', value:('\u25B2') });
		$('#messages').append(question, upvoteButton);
		$('#'+ 'upvote' +questionID).click(function() {
			socket.emit('upvote', questionID);
			$('#'+ 'upvote' +questionID).remove();
		});
	});

	socket.on('upvote', function(questionID, memberNum) {
		var fontsize = $('#'+'question'+questionID).css("font-size");
		newFontsize = fontsize.split("px")[0] * (1 + 1 / memberNum);

		if (newFontsize > 15.6 * 2) {
			newFontsize = 15.6 * 2;
		}

<<<<<<< Updated upstream
		<script src="/socket.io/socket.io.js"></script>
		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		<script>
			$(function () {
				var socket = io();
				$('form').submit(function(e) {
					e.preventDefault();

					//Check question
					if (document.getElementById("questionCheck").checked) {

						if (document.getElementById("anonCheck").checked) {
							socket.emit('question', "Anonymous", $('#m').val(), 'ninja');
						}

						else {
							socket.emit('question', name, $('#m').val(), 'ninja');
						}
					}

					else {
						if (document.getElementById("anonCheck").checked) {
							socket.emit('chat message', "Anonymous", $('#m').val());
						}

						else {
							socket.emit('chat message', name, $('#m').val());
						}
					}

					$('#m').val('');
					return false;
				});
				socket.on('chat message', function(sender, msg){
					$('#messages').append($('<li>').text(sender + ": " +msg));
				});

				socket.on('question', function(sender, questionMsg, questionID){
					var question = $('<li>').text(sender + ": " +questionMsg);
					question.css({"background-color":"yellow", "font-size": "120%"});
					question.attr({id: 'question' +questionID});
					var upvoteButton = $('<input/>').attr({id: 'upvote' +questionID, type: 'button', name:'Upvote', value:('\u25B2') });
					$('#messages').append(question, upvoteButton);
					$('#'+ 'upvote' +questionID).click(function() {
						socket.emit('upvote', questionID);
						$('#'+ 'upvote' +questionID).remove();
					});
				});

				socket.on('upvote', function(questionID, memberNum) {
					var fontsize = $('#'+'question'+questionID).css("font-size");
					newFontsize = fontsize.split("px")[0] * (1 + 1 / memberNum);

					if (newFontsize > 15.6 * 2) {
						newFontsize = 15.6 * 2;
					}

					$('#'+'question'+questionID).css("font-size", newFontsize);
				});
			});
		</script>

	</body>
=======
		$('#'+'question'+questionID).css("font-size", newFontsize);
	});
});
</script>

<div class="footer">
	<div role="main">
		<a href="https://www.ltu.se/">
			<img src="/images/ltulogga.png" class="align-middle" style="margin-top:5px; margin-bottom:5px; margin-left: 5px; height:65px; width:136px;">
		</a>
	</div>
</div>
</div>

</body>
>>>>>>> Stashed changes
</html>
